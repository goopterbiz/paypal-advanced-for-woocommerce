const goopterOrder={productAddToCart:!0,lastApiResponse:null,ppcp_address:[],isCheckoutPage:()=>"checkout"===goopter_ppcp_manager.page,isProductPage:()=>"product"===goopter_ppcp_manager.page,isCartPage:()=>"cart"===goopter_ppcp_manager.page,isSale:()=>"capture"===goopter_ppcp_manager.paymentaction,isOrderPayPage:()=>new URL(window.location.href).searchParams.has("pay_for_order"),isOrderCompletePage:()=>new URL(window.location.href).searchParams.has("paypal_order_id"),getSelectedPaymentMethod:()=>jQuery('input[name="payment_method"]').length?jQuery('input[name="payment_method"]:checked').val():jQuery('input[name="radio-control-wc-payment-method-options"]').length?jQuery('input[name="radio-control-wc-payment-method-options"]:checked').val():void 0,isApplePayPaymentMethodSelected:()=>"goopter_ppcp_apple_pay"===goopterOrder.getSelectedPaymentMethod(),isPpcpPaymentMethodSelected:()=>"goopter_ppcp"===goopterOrder.getSelectedPaymentMethod(),isCCPaymentMethodSelected:()=>"goopter_ppcp_cc"===goopterOrder.getSelectedPaymentMethod(),isGooglePayPaymentMethodSelected:()=>"goopter_ppcp_google_pay"===goopterOrder.getSelectedPaymentMethod(),isGoopterPpcpPaymentMethodSelected:()=>{let e=goopterOrder.getSelectedPaymentMethod();return"goopter_ppcp"===e||"goopter_ppcp_apple_pay"===e||"goopter_ppcp_google_pay"===e},isGoopterPpcpAdditionalPaymentMethodSelected:()=>{let e=goopterOrder.getSelectedPaymentMethod();return"goopter_ppcp_apple_pay"===e||"goopter_ppcp_google_pay"===e},isGoopterPaymentMethodSelected:()=>{let e=goopterOrder.getSelectedPaymentMethod();return"goopter_ppcp"===e||"goopter_ppcp_apple_pay"===e||"goopter_ppcp_google_pay"===e},isSavedPaymentMethodSelected:()=>{let e=goopterOrder.getSelectedPaymentMethod(),r=jQuery('input[name="wc-'+e+'-payment-token"]:checked');if(r.length){let e=r.val();if(void 0!==e&&"new"!==e)return!0}return!1},isApplePayEnabled:()=>""!==goopter_ppcp_manager.apple_sdk_url,isGooglePayEnabled:()=>""!==goopter_ppcp_manager.google_sdk_url,getConstantValue:(e,r)=>goopter_ppcp_manager.constants&&goopter_ppcp_manager.constants[e]?goopter_ppcp_manager.constants[e]:r,getCheckoutSelectorCss:()=>{let e=".woocommerce";return goopterOrder.isCheckoutPage()?e="yes"===goopter_ppcp_manager.is_pay_page?"form#order_review":"form.checkout":"add_payment_method"===goopter_ppcp_manager.page&&(e="form#add_payment_method"),0===jQuery(e).length&&(e="form.wc-block-checkout__form"),e},getWooNoticeAreaSelector:()=>{let e=".woocommerce-notices-wrapper:first";const r=goopterOrder.getCheckoutSelectorCss();return jQuery(r).find(e).length&&jQuery(r).find(e).is(":visible")?`${r} ${e}`:jQuery(e).length?e:goopterOrder.getCheckoutSelectorCss()},scrollToWooCommerceNoticesSection:()=>{let e=jQuery(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");e.length||(e=jQuery("form.checkout")),e.length||(e=jQuery("form#order_review")),e.length&&jQuery("html, body").animate({scrollTop:e.offset().top-100},1e3)},updateWooCheckoutFormNonce:e=>{goopter_ppcp_manager.woocommerce_process_checkout=e,jQuery("#woocommerce-process-checkout-nonce").val(e)},createSmartButtonOrder:({goopter_ppcp_button_selector:e,errorLogId:r})=>goopterOrder.createOrder({goopter_ppcp_button_selector:e,errorLogId:r}).then((e=>e.orderID)),createOrder:({goopter_ppcp_button_selector:e,billingDetails:r,shippingDetails:o,apiUrl:t,errorLogId:p,callback:a})=>{void 0===t&&(t=goopter_ppcp_manager.create_order_url),goopterOrder.lastApiResponse=null;let c,d=goopterOrder.getWooFormSelector();goopterOrder.removeError();let n=goopterOrder.isCheckoutPage(),s=goopterOrder.isProductPage(),l=null,g=null;r&&(l=jQuery("<input>",{type:"hidden",name:"billing_address_source",value:JSON.stringify(r)})),o&&(g=jQuery("<input>",{type:"hidden",name:"shipping_address_source",value:JSON.stringify(o)}));return n&&["#goopter_ppcp_checkout_top","#goopter_ppcp_checkout_top_google_pay","#goopter_ppcp_checkout_top_apple_pay"].indexOf(e)>-1?c="":(s&&(jQuery(d).find("input[name=goopter_ppcp-add-to-cart]").remove(),goopterOrder.productAddToCart&&(jQuery("<input>",{type:"hidden",name:"goopter_ppcp-add-to-cart",value:jQuery("[name='add-to-cart']").val()}).appendTo(d),goopterOrder.productAddToCart=!1)),l&&(jQuery(d).find("input[name=billing_address_source]").remove(),l.appendTo(d)),g&&(jQuery(d).find("input[name=shipping_address_source]").remove(),g.appendTo(d)),c=jQuery(d).serialize(),""===c?(c="goopter_ppcp_payment_method_title="+jQuery("#goopter_ppcp_payment_method_title").val(),null!==goopterOrder.ppcp_address&&void 0!==goopterOrder.ppcp_address&&""!==goopterOrder.ppcp_address&&(c+="&woocommerce-process-checkout-nonce="+goopter_ppcp_manager.woocommerce_process_checkout+"&address="+JSON.stringify(goopterOrder.ppcp_address))):null!==goopterOrder.ppcp_address&&void 0!==goopterOrder.ppcp_address&&""!==goopterOrder.ppcp_address&&(c+="&woocommerce-process-checkout-nonce="+goopter_ppcp_manager.woocommerce_process_checkout+"&address="+JSON.stringify(goopterOrder.ppcp_address))),goopterJsErrorLogger.addToLog(p,{context:"api_request",url:t,method:"POST",body:c,time:new Date}),fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c}).then((async function(e){if(goopterJsErrorLogger.addToLog(p,{context:"api_response",response:e,redirected:e.redirected,status:e.status,time:new Date}),console.log("createOrder response",{res:e,apiUrl:t,redirected:e.redirected,url:e.url,status:e.status}),!e.redirected)return goopterOrder.lastApiResponse=await e.clone().text(),e.json();window.location.href=e.url})).then((function(e){if("function"!=typeof a){if(void 0!==e.success){let r=e.data.messages?e.data.messages:e.data;throw"string"!=typeof r?(r=r.map((function(e){return"<li>"+e+"</li>"})).join(""),""!==localizedMessages.error_message_checkout_validation&&(r="<li>"+localizedMessages.error_message_checkout_validation+"</li>"+r)):r="<li>"+r+"</li>",r}return e}a(e)})).then((e=>(goopterOrder.isCheckoutPage()&&void 0!==e.nonce&&goopterOrder.updateWooCheckoutFormNonce(e.nonce),e)))},approveOrder:({orderID:e,payerID:r,errorLogId:o})=>{goopterOrder.isCheckoutPage()?goopterOrder.checkoutFormCapture({payPalOrderId:e,errorLogId:o}):"yes"===goopter_ppcp_manager.is_skip_final_review?window.location.href=goopter_ppcp_manager.direct_capture+"&paypal_order_id="+e+"&paypal_payer_id="+r+"&from="+goopter_ppcp_manager.page:window.location.href=goopter_ppcp_manager.checkout_url+"&paypal_order_id="+e+(r?"&paypal_payer_id="+r:"")+"&from="+goopter_ppcp_manager.page},shippingAddressUpdate:(e,r,o)=>goopterOrder.createOrder({apiUrl:goopter_ppcp_manager.shipping_update_url,shippingDetails:e,billingDetails:r,errorLogId:o}),triggerPaymentCancelEvent:()=>{jQuery(document.body).trigger("goopter_paypal_oncancel")},onCancel:()=>{goopterOrder.triggerPaymentCancelEvent(),goopterOrder.isCheckoutPage()||(goopterOrder.showProcessingSpinner(),goopterOrder.isProductPage()||window.location.reload())},prepareWooErrorMessage:e=>'<ul class="woocommerce-error">'+e+"</ul>",removeError:()=>{jQuery(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove()},showError:e=>{e=goopterOrder.prepareWooErrorMessage(e);let r=goopterOrder.getWooNoticeAreaSelector();jQuery(r).prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+e+"</div>"),jQuery(r).removeClass("processing").unblock(),jQuery(r).is(":visible")||jQuery(r).css("display","block"),jQuery(r).find(".input-text, select, input:checkbox").trigger("validate").trigger("blur"),goopterOrder.scrollToWooCommerceNoticesSection()},showProcessingSpinner:e=>{void 0===e&&(e=".woocommerce"),jQuery(".wp-block-woocommerce-checkout-fields-block").length?jQuery(".wp-block-woocommerce-checkout-fields-block #contact-fields, .wp-block-woocommerce-checkout-fields-block #billing-fields, .wp-block-woocommerce-checkout-fields-block #payment-method").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}):jQuery(e).length&&jQuery(e).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},hideProcessingSpinner:e=>{void 0===e&&(e=".woocommerce"),jQuery(".wp-block-woocommerce-checkout-fields-block").length?jQuery(".wc-block-components-checkout-place-order-button, .wp-block-woocommerce-checkout-fields-block #contact-fields, .wp-block-woocommerce-checkout-fields-block #billing-fields, .wp-block-woocommerce-checkout-fields-block #payment-method").unblock():jQuery(e).length&&jQuery(e).unblock()},handleCreateOrderError:(e,r)=>{console.log("create_order_error",e,goopterOrder.lastApiResponse),goopterOrder.hideProcessingSpinner(),jQuery(document.body).trigger("goopter_paypal_onerror");let o=e.message?e.message:e;if(o.toLowerCase().indexOf("expected an order id to be passed")>-1)o.toLowerCase().indexOf("required fields")<0&&(o=localizedMessages.create_order_error);else if(o.toLowerCase().indexOf("unexpected token")>-1){let e=jQuery("<textarea/>").text(goopterOrder.lastApiResponse).html();goopterJsErrorLogger.logJsError("InvalidJSON, Received Response: "+e,r),o="<li>"+localizedMessages.create_order_error+"</li>"}""!==o&&goopterOrder.showError(o),goopterOrder.scrollToWooCommerceNoticesSection(),goopterOrder.isCheckoutPage()},isCardFieldEligible:()=>!(!goopterOrder.isCheckoutPage()||"yes"!==goopter_ppcp_manager.advanced_card_payments)&&("undefined"!=typeof goopter_paypal_sdk&&void 0!==goopter_paypal_sdk.CardFields&&!0===goopter_paypal_sdk.CardFields().isEligible()),showPpcpPaymentMethods:()=>{jQuery("#goopter_ppcp_checkout, #goopter_ppcp_checkout_apple_pay, #goopter_ppcp_checkout_google_pay").hide(),goopterOrder.isApplePayPaymentMethodSelected()?jQuery("#goopter_ppcp_checkout_apple_pay").show():goopterOrder.isGooglePayPaymentMethodSelected()?jQuery("#goopter_ppcp_checkout_google_pay").show():jQuery("#goopter_ppcp_checkout").show()},hidePpcpPaymentMethods:()=>{jQuery("#goopter_ppcp_checkout, #goopter_ppcp_checkout_apple_pay, #goopter_ppcp_checkout_google_pay").hide()},hideShowPlaceOrderButton:()=>{let e=goopterOrder.getSelectedPaymentMethod();console.log("hideShowPlaceOrderButton",e);let r=goopterOrder.isGoopterPpcpPaymentMethodSelected();!0===r&&jQuery(".wcf-pre-checkout-offer-action").val(""),!1===goopterOrder.isCardFieldEligible()&&jQuery(".payment_method_goopter_ppcp_cc").hide(),!0===r&&"no"===goopter_ppcp_manager.is_checkout_disable_smart_button||goopterOrder.isGoopterPpcpAdditionalPaymentMethodSelected()?(showHidePlaceOrderBtn(),goopterOrder.showPpcpPaymentMethods()):(goopterOrder.hidePpcpPaymentMethods(),showHidePlaceOrderBtn())},createHiddenInputField:({fieldId:e,fieldName:r,fieldValue:o,fieldType:t,appendToSelector:p})=>{jQuery("#"+e).length>0&&jQuery("#"+e).remove(),jQuery("<input>",{type:void 0===t?"hidden":t,id:e,name:r,value:o}).appendTo(p)},getWooFormSelector:()=>{let e="";return goopterOrder.isProductPage()?e="form.cart":goopterOrder.isCartPage()?e="form.woocommerce-cart-form":goopterOrder.isCheckoutPage()&&(e=goopterOrder.getCheckoutSelectorCss()),0===jQuery(e).length&&(e="form.wc-block-checkout__form"),console.log(e),e},setPaymentMethodSelector:e=>{let r=goopterOrder.getWooFormSelector();document.querySelector(r)||(r=document.body),goopterOrder.createHiddenInputField({fieldId:"goopter_ppcp_payment_method_title",fieldName:"goopter_ppcp_payment_method_title",fieldValue:e,appendToSelector:r})},renderSmartButton:()=>{jQuery.each(goopter_ppcp_manager.button_selector,(function(e,r){if(!jQuery(r).length||jQuery(r).children().length)return;if("undefined"==typeof goopter_paypal_sdk)return;let o={layout:goopter_ppcp_manager.style_layout,color:goopter_ppcp_manager.style_color,shape:goopter_ppcp_manager.style_shape,label:goopter_ppcp_manager.style_label};""!==goopter_ppcp_manager.style_height&&(o.height=parseInt(goopter_ppcp_manager.style_height)),"vertical"!==goopter_ppcp_manager.style_layout&&(o.tagline="yes"===goopter_ppcp_manager.style_tagline);let t=null;goopter_paypal_sdk.Buttons({style:o,createOrder:function(e,o){return t=goopterJsErrorLogger.generateErrorId(),goopterJsErrorLogger.addToLog(t,"PayPal Smart Button Payment Started"),goopterOrder.createSmartButtonOrder({goopter_ppcp_button_selector:r,errorLogId:t})},onApprove:function(e,r){goopterOrder.showProcessingSpinner(),goopterOrder.approveOrder({...e,errorLogId:t})},onCancel:function(e,r){goopterOrder.hideProcessingSpinner(),goopterOrder.onCancel()},onClick:function(e,r){goopterOrder.setPaymentMethodSelector(e.fundingSource)},onError:function(e){goopterOrder.handleCreateOrderError(e,t)}}).render(r)})),goopterOrder.isApplePayEnabled()&&jQuery.each(goopter_ppcp_manager.apple_pay_btn_selector,(function(e,r){(new ApplePayCheckoutButton).render(r)})),goopterOrder.isGooglePayEnabled()&&jQuery.each(goopter_ppcp_manager.google_pay_btn_selector,(function(e,r){(new GooglePayCheckoutButton).render(r)}))},checkoutFormCapture:({checkoutSelector:e,payPalOrderId:r,errorLogId:o})=>{void 0===e&&(e=goopterOrder.getCheckoutSelectorCss());let t,p=goopter_ppcp_manager.cc_capture+"&paypal_order_id="+r+"&woocommerce-process-checkout-nonce="+goopter_ppcp_manager.woocommerce_process_checkout+"&is_pay_page="+goopter_ppcp_manager.is_pay_page;goopterOrder.isCheckoutPage()&&(t=jQuery(e).serialize()),void 0!==window.can_update_checkout&&(jQuery(e).on("checkout_place_order_"+goopterOrder.getSelectedPaymentMethod(),(function(){return!1})),jQuery(e).submit()),fetch(p,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then((function(e){return e.json()})).then((function(e){window.location.href=e.data.redirect})).catch((r=>{console.log("capture error",r),jQuery(e).removeClass("processing paypal_cc_submiting CardFields createOrder"),goopterOrder.handleCreateOrderError(r,o),goopterOrder.hideProcessingSpinner("#customer_details, .woocommerce-checkout-review-order")}))},renderHostedButtons:()=>{if("undefined"==typeof goopter_paypal_sdk)return;let e=goopterOrder.getCheckoutSelectorCss();if(jQuery(e).is(".CardFields"))return!1;if(!1===goopterOrder.isCCPaymentMethodSelected())return!1;let r=e;jQuery(e).addClass("CardFields");let o=null;const t=goopter_paypal_sdk.CardFields({createOrder:function(r,t){if(jQuery(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),!jQuery(e).hasClass("createOrder"))return o=goopterJsErrorLogger.generateErrorId(),goopterJsErrorLogger.addToLog(o,"Advanced CC Payment Started"),jQuery(e).addClass("createOrder"),goopterOrder.setPaymentMethodSelector(r.paymentSource),goopterOrder.createOrder({errorLogId:o}).then((function(e){return e.orderID})).catch((e=>(goopterOrder.showError(e),"")))},onApprove:function(r,t){r.orderID&&goopterOrder.checkoutFormCapture({checkoutSelector:e,payPalOrderId:r.orderID,errorLogId:o})},onError:function(e){console.log("Error occurred:",e),"object"==typeof e&&null!==e?(console.log("Error message:",e.message||"No error message available"),e.stack&&console.log("Stack trace:",e.stack)):console.log("Unexpected error format:",e)},style:{input:{"font-size":goopter_ppcp_manager.card_style_props.font_size,color:goopter_ppcp_manager.card_style_props.color,"font-weight":goopter_ppcp_manager.card_style_props.font_weight,"font-style":goopter_ppcp_manager.card_style_props.font_style,padding:goopter_ppcp_manager.card_style_props.padding}},inputEvents:{onChange:function(e){if(e.cards&&e.cards.length>0){let r=e.cards[0].type.replace("master-card","mastercard").replace("american-express","amex").replace("diners-club","dinersclub").replace("-","");-1!==jQuery.inArray(r,goopter_ppcp_manager.disable_cards)?(jQuery("#goopter_ppcp_cc-card-number").addClass("ppcp-invalid-cart"),goopterOrder.showError(localizedMessages.card_not_supported)):jQuery("#goopter_ppcp_cc-card-number").removeClass().addClass(r)}}}});t.isEligible()?(t.NumberField().render("#goopter_ppcp_cc-card-number"),t.ExpiryField().render("#goopter_ppcp_cc-card-expiry"),t.CVVField().render("#goopter_ppcp_cc-card-cvc")):jQuery(".payment_method_goopter_ppcp_cc").hide(),jQuery(document.body).on("submit_paypal_cc_form",(o=>{o.preventDefault(),t.getState().then((o=>{if(o.isFormValid)goopterOrder.showProcessingSpinner(r),t.submit().then((()=>{})).catch((e=>{console.log(e)}));else{if(!o.isFormValid)return jQuery(e).removeClass("processing paypal_cc_submiting CardFields createOrder"),void goopterOrder.showError(localizedMessages.fields_not_valid);o.errors&&(console.log(o),o.errors.forEach((e=>{console.log(e)})))}}))}))},applePayDataInit:async()=>{if(goopterOrder.isApplePayEnabled()){goopterOrder.showProcessingSpinner("#goopter_ppcp_cart_apple_pay");let e=await goopterOrder.shippingAddressUpdate({});goopterOrder.hideProcessingSpinner("#goopter_ppcp_cart_apple_pay"),void 0!==e.totalAmount?goopter_ppcp_manager.goopter_cart_totals=e:window.location.reload()}},getCartDetails:()=>goopter_ppcp_manager.goopter_cart_totals,updateCartTotalsInEnvironment:e=>{let r,o={renderNeeded:!0};if(e?r=e:jQuery("#goopter_cart_totals").length&&(r=JSON.parse(jQuery("#goopter_cart_totals").text())),r){const e=()=>{console.log("goopter_cart_total_updated",r),goopter_ppcp_manager.goopter_cart_totals=r,jQuery(document.body).trigger("goopter_cart_total_updated")},t=goopterOrder.getCartDetails();if(t.currencyCode!==r.currencyCode){console.log(`Currency changed, refreshing PayPal Lib SDK: ${t.currencyCode} => ${r.currencyCode}`);let p=goopterOrder.getCheckoutSelectorCss();goopterOrder.showProcessingSpinner(p),goopter_ppcp_manager.paypal_sdk_url=pfwUrlHelper.setQueryParam("currency",r.currencyCode,goopter_ppcp_manager.paypal_sdk_url),window.goopterLoadAsyncLibs((()=>{e(),goopterOrder.renderPaymentButtons(),goopterOrder.hideProcessingSpinner(p)}),(()=>{console.log("Unable to refresh the PayPal Lib"),goopterOrder.showError("<li>"+localizedMessages.currency_change_js_load_error+"</li>"),goopterOrder.hideProcessingSpinner(p)})),o.renderNeeded=!1}else e()}return o},addPaymentMethodAdvancedCreditCard:()=>{if("undefined"==typeof goopter_paypal_sdk)return;let e=goopterOrder.getCheckoutSelectorCss();const r=goopter_paypal_sdk.CardFields({createVaultSetupToken:async()=>{goopterOrder.showProcessingSpinner(e);const r=await fetch(goopter_ppcp_manager.goopter_ppcp_cc_setup_tokens,{method:"POST"}),{id:o}=await r.json();return o},onApprove:async r=>{const o=goopterOrder.getConstantValue("approval_token_id"),t=`${goopter_ppcp_manager.advanced_credit_card_create_payment_token}&${o}=${r.vaultSetupToken}`;fetch(t,{method:"POST"}).then((e=>e.json())).then((e=>{window.location.href=e.redirect})).catch((r=>{goopterOrder.showError(r),goopterOrder.hideProcessingSpinner(e),console.error("An error occurred:",r)}))},onError:r=>{goopterOrder.hideProcessingSpinner(e),goopterOrder.showError(r),console.error("Something went wrong:",r)}});r.isEligible()?(r.NameField().render("#ppcp-my-account-card-holder-name"),r.NumberField().render("#ppcp-my-account-card-number"),r.ExpiryField().render("#ppcp-my-account-expiration-date"),r.CVVField().render("#ppcp-my-account-cvv")):jQuery(".payment_method_goopter_ppcp_cc").hide(),jQuery(e).unbind("submit").on("submit",(o=>{goopterOrder.removeError(),(goopterOrder.isCCPaymentMethodSelected()||goopterOrder.isPpcpPaymentMethodSelected())&&(goopterOrder.showProcessingSpinner(e),!0===goopterOrder.isCCPaymentMethodSelected()&&(o.preventDefault(),r.submit().then((e=>{console.log("add_payment_method_submit_success")})).catch((r=>{goopterOrder.hideProcessingSpinner(e),goopterOrder.showError(r),console.error("add_payment_method_submit_error:",r)}))))}))},queuedEvents:{},addEventsForCallback:(e,r,o)=>{goopterOrder.queuedEvents[e]={event:r,data:o}},dequeueEvent:e=>{e in goopterOrder.queuedEvents&&delete goopterOrder.queuedEvents[e]},isPendingEventTriggering:!1,triggerPendingEvents:()=>{goopterOrder.isPendingEventTriggering=!0;for(let e in goopterOrder.queuedEvents)goopterOrder.queuedEvents[e].data?jQuery(document.body).trigger(e,[goopterOrder.queuedEvents[e].data]):jQuery(document.body).trigger(e),console.log(e)},renderPaymentButtons:()=>{goopterOrder.hideShowPlaceOrderButton(),goopterOrder.renderSmartButton(),!0===goopterOrder.isCardFieldEligible()&&(0===jQuery("#goopter_ppcp_cc-card-number iframe").length&&jQuery(goopterOrder.getCheckoutSelectorCss()).removeClass("CardFields"),jQuery(".checkout_cc_separator").show(),jQuery("#wc-goopter_ppcp-cc-form").show(),goopterOrder.renderHostedButtons())},hooks:{handleWooEvents:()=>{jQuery(document.body).on("updated_cart_totals payment_method_selected updated_checkout",(function(e,r){let o;console.log(`hook_received => ${e.type}`,r,goopterOrder.getCartDetails()),goopterOrder.dequeueEvent(e.type),void 0!==r&&void 0!==r.fragments&&void 0!==r.fragments.goopter_payments_data?o=goopterOrder.updateCartTotalsInEnvironment(JSON.parse(r.fragments.goopter_payments_data)):"updated_cart_totals"===e.type&&(o=goopterOrder.updateCartTotalsInEnvironment()),o&&!o.renderNeeded||goopterOrder.renderPaymentButtons()})),jQuery(document.body).on("trigger_goopter_ppcp_cc",(function(e){goopterOrder.renderPaymentButtons()}))},handleRaceConditionOnWooHooks:()=>{jQuery(document.body).on("updated_cart_totals payment_method_selected updated_checkout ppcp_block_ready",(function(e,r){goopterOrder.isPendingEventTriggering||goopterOrder.addEventsForCallback(e.type,e,r)}))},onPaymentCancellation:()=>{jQuery(document.body).on("goopter_paypal_oncancel",(function(e){e.preventDefault(),goopterOrder.isProductPage()&&!1===goopterOrder.productAddToCart&&fetch(goopter_ppcp_manager.update_cart_oncancel,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:jQuery(goopterOrder.getWooFormSelector()).serialize()}).then((function(e){return e.json()})).then((function(e){window.location.reload()}))}))}}};__=wp.i18n.__;const localizedMessages={card_not_supported:__("Unfortunately, we do not support this credit card type. Please try another card type.","paypal-advanced-for-woocommerce"),fields_not_valid:__("Unfortunately, your credit card details are not valid. Please review the card details and try again.","paypal-advanced-for-woocommerce"),error_message_checkout_validation:__("Unable to create the order due to the following errors.","paypal-advanced-for-woocommerce"),expiry_date_placeholder:__("MM / YY","paypal-advanced-for-woocommerce"),cvc_placeholder:__("CVC","paypal-advanced-for-woocommerce","paypal-advanced-for-woocommerce"),empty_cart_message:__("Your shopping cart seems to be empty.","paypal-advanced-for-woocommerce"),total_amount_placeholder:__("Total Amount","paypal-advanced-for-woocommerce"),apple_pay_pay_error:__("An error occurred while initiating the ApplePay payment.","paypal-advanced-for-woocommerce"),error_validating_merchant:__("This merchant is not enabled to process requested payment method. please contact website owner.","paypal-advanced-for-woocommerce"),general_error_message:__("We are unable to process your request at the moment, please contact website owner.","paypal-advanced-for-woocommerce"),shipping_amount_update_error:__("Unable to update the shipping amount.","paypal-advanced-for-woocommerce"),shipping_amount_pull_error:__("Unable to pull the shipping amount details based on selected address","paypal-advanced-for-woocommerce"),currency_change_js_load_error:__("We encountered an issue loading the updated currency. Please refresh the page or contact support for assistance.","paypal-advanced-for-woocommerce"),create_order_error:__("Unable to create the order, please contact the support.","paypal-advanced-for-woocommerce"),create_order_error_with_content:__("Unable to create the order, please contact the support with following error message.","paypal-advanced-for-woocommerce")},pfwUrlHelper={getUrlObject:e=>(e||(e=window.location.href),new URL(e)),setQueryParam:(e,r,o)=>{let t=(o=pfwUrlHelper.getUrlObject(o)).searchParams;return t.set(e,r),o.search=t.toString(),o.toString()},getQueryParams:e=>(e=pfwUrlHelper.getUrlObject(e)).searchParams,removeQueryParam:(e,r)=>{let o=(r=pfwUrlHelper.getUrlObject(r)).searchParams;return o.delete(e),r.search=o.toString(),r.toString()},removeAllParams:e=>((e=pfwUrlHelper.getUrlObject(e)).search="",e.toString())},goopterJsErrorLogger={errorStackMeta:{},generateErrorId:()=>Date.now()+Math.floor(101*Math.random()),addToLog:(e,r)=>{void 0===goopterJsErrorLogger.errorStackMeta[e]&&(goopterJsErrorLogger.errorStackMeta[e]=[]),goopterJsErrorLogger.errorStackMeta[e].push(r)},getLogTrace:e=>void 0!==goopterJsErrorLogger.errorStackMeta[e]?goopterJsErrorLogger.errorStackMeta[e]:[],logJsError:(e,r)=>{fetch(goopter_ppcp_manager.handle_js_errors,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:e,logTrace:goopterJsErrorLogger.getLogTrace(r)})}).then((function(e){})).then((function(e){}))}};